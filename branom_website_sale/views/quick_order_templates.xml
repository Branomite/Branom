<?xml version="1.0" encoding="UTF-8" ?>
<odoo>
    <template id="header_qo" inherit_id="website.layout" name="Header Quick Order Link">
        <xpath expr="//header//ul[@id='top_menu']/li" position="before">
            <!--            <t t-set="website_sale_order" t-value="website.sale_get_order()"/>-->
<!--            <li class="nav-item divider d-none"/> &lt;!&ndash; Make sure the cart and related menus are not folded (see autohideMenu) &ndash;&gt;-->
            <li t-attf-class="nav-item">
                <a href="/quick-order" class="nav-link">
                    Quick Order
                </a>
                <div id="brnm_quick_order_popover" style="display: none;">
                    <t t-if="request.httprequest.path != '/quick-order'">
                        <t t-call="branom_website_sale.quick_order_form">
                            <t t-set="popover" t-value="true"/>
                        </t>
                    </t>
                    <form t-else=""></form>
                </div>
            </li>
        </xpath>
    </template>

    <template id="quick_order_form" name="Quick Order Form">
        <form t-attf-class="brnm_quickorder_form container-fluid{{'' if popover else ' mt32'}}" action="/quick-order" method="post">
            <div class="brnm_qo_errors alert alert-danger" style="display: none;" role="alert">
                <ul class="m-0">
                </ul>
            </div>
            <div class="quick_order_lines">
                <t t-set="line_count" t-value="0"/>
                <t t-foreach="range(3)" t-as="extra_line">
                    <div class="quick_order_row form-group row form-field o_website_form_custom"
                         t-attf-data-line-num="{{line_count}}">
                        <div t-attf-class="{{ 'col-8 px-0' if popover else 'col-lg-7 col-md-7'}}">
                            <input type="text" class="brnm_sku_input form-control o_website_form_input"
                                   t-attf-name="item_num_{{line_count}}" placeholder="Item #"/>
                            <div class="brnm_qo_feedback"/>
                        </div>
                        <div t-attf-class="{{'col-4' if popover else 'col-lg-3 col-md-4'}}">
                            <input type="text" class="brnm_qty_input form-control o_website_form_input"
                                   t-attf-name="qty_{{line_count}}" value="1"/>
                        </div>
                    </div>
                    <t t-set="line_count" t-value="line_count + 1"/>
                </t>
            </div>

            <div class="form-group row">
                <div t-attf-class="{{'col px-0' if popover else 'col-md-10 col-lg-9'}}">
                    <button type="button"
                            t-attf-class="brnm_qo_add_item btn btn-info{{'' if popover else ' btn-lg'}}">
                        Add line
                    </button>
                    <button type="submit"
                            t-attf-class="brnm_qo_add_to_cart btn btn-primary{{'' if popover else ' btn-lg'}}"
                            disabled="disabled">
                        <i class="fa fa-shopping-cart"/>
                        Add to Cart
                    </button>
                    <span id="o_website_form_result"></span>
                </div>
            </div>
        </form>
    </template>

    <template id="quick_order_page" name="Quick Order">
        <t t-call="website.layout">
            <div class="wrap">
                <div class="container">
                    <div class="row">
                        <t t-call="branom_website_sale.quick_order_form">
                            <t t-set="popover" t-value="false"/>
                        </t>
                    </div>
                </div>
            </div>
        </t>
    </template>
</odoo>